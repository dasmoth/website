[% USE Dumper %]

[% Dumper.dump(fields.name.data.id) %]
<div id="extended_seq">
    Number of bases upstream:
    <input type="text" id="num_upstream" value=0>
    Number of bases downstream:
    <input type="text" id="num_downstream" value=0>
    <input type="submit" onClick="WB.extendSequence.submit($jq(this))" value="generate sequence" id="sequence_submit" rel="[% c.uri_for('/rest','field','transcript', fields.name.data.id, 'print_extend_sequence').path %]">
</div>

[%
  sequence('print_sequence');

  WRAPPER $field_block title="Strand" key='strand';
    '(' _ c.stash.fields.strand.data _ ')';
  END;

  WRAPPER $field_block title="Predicted Exon Structure" key="predicted_exon_structure";

        build_data_table( order = ['no','start','end','len'],
                          columns = {
									  no 	 => 'Exon #',
                                      start  => 'Start',
                                      end    => 'End',
                                      len => 'Length'
                                    },
                          passed_data = fields.predicted_exon_structure.data,
                          key = 'predicted_exon_structure');

  END;

  WRAPPER $field_block title="Predicted Genes & Transcriptional Units" key="predicted_units";
        build_data_table( order = ['start','end','name','gene', 'predicted_type', 'comment'],
                          columns = { start => 'Start',
                                      end => 'End',
                                      name   => 'Name',
                                      gene => 'Gene',
                                      predicted_type => 'Predicted type',
                                      comment => 'Comment'},
                          passed_data = fields.predicted_units.data,
                          key = 'predicted_units');
  END;

  WRAPPER $field_block title="Transcripts in this region" key="transcripts";
	tags2link(c.stash.fields.transcripts.data, '<br />', 'Results');
  END;

%]
